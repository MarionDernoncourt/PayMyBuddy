

CREATE TABLE users (
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
username VARCHAR(100) NOT NULL UNIQUE,
email VARCHAR(255) NOT NULL UNIQUE,
password VARCHAR(255) NOT NULL,
account_balance DECIMAL(10,2) DEFAULT 0.00
);

CREATE TABLE transactions (
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
description VARCHAR(255) NOT NULL,
amount DECIMAL(10,2) NOT NULL,
sender_id INT NOT NULL,
receiver_id INT NOT NULL,
FOREIGN KEY (sender_id) REFERENCES users(id) ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY (receiver_id) REFERENCES users(id) ON DELETE RESTRICT ON UPDATE CASCADE
);

CREATE TABLE user_user(
user_id INT NOT NULL,
connected_user_id INT NOT NULL,
FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY (connected_user_id) REFERENCES users(id) ON DELETE RESTRICT ON UPDATE CASCADE,
PRIMARY KEY (user_id, connected_user_id)
);